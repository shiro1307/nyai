{% extends "base.html" %}

{% block content %}
<div class="container">
    <h2>Your Document History</h2>
    
    {% if documents %}
        <table>
            <thead>
                <tr>
                    <th>Type</th>
                    <th>Date</th>
                    <th>Risk Score</th>
                    <th>Preview</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                {% for doc in documents %}
                <tr>
                    <td>{{ doc.type }}</td>
                    <td>{{ doc.date }}</td>
                    <td>
                        {% if doc.get('risk_score') is not none %}
                            {% if doc.get('risk_score') <= 30 %}
                                <span style="background: #28a745; color: white; padding: 4px 12px; border-radius: 12px; font-weight: bold;">
                                    {{ doc.get('risk_score') }} - Low
                                </span>
                            {% elif doc.get('risk_score') <= 60 %}
                                <span style="background: #ffc107; color: #333; padding: 4px 12px; border-radius: 12px; font-weight: bold;">
                                    {{ doc.get('risk_score') }} - Medium
                                </span>
                            {% else %}
                                <span style="background: #dc3545; color: white; padding: 4px 12px; border-radius: 12px; font-weight: bold;">
                                    {{ doc.get('risk_score') }} - High
                                </span>
                            {% endif %}
                        {% else %}
                            <span style="color: #999;">N/A</span>
                        {% endif %}
                    </td>
                    <td>{{ doc.preview }}</td>
                    <td>
                        <a href="{{ url_for('view_document', doc_id=doc['doc_id']) }}" style="color: navy;">View</a> | 
                        <a href="{{ url_for('export_pdf', doc_id=doc['doc_id']) }}" style="color: green;">Export</a> |
                        <a href="{{ url_for('delete_document', doc_id=doc['doc_id']) }}" 
                           onclick="return confirm('Delete this document?')" style="color: red;">Delete</a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    {% else %}
        <p>No documents yet. Start using the tools above!</p>
    {% endif %}
</div>
{% endblock %}